# MC Robot <img src=".robot.jpeg#" height="100" />
An application that manages multi-cluster service discovery & setup.
The goal of this application is to make services in other clusters easily reachable.

The actions that are performed:
1. retrieve a list of k8s nodes
2. retrieve a list of k8s NodePort Services
3. publish list of nodes & services via PubSub mechanism
4. configure custom k8s Service & Endpoints pointing to services in other clusters

This meets the goals because after this is done, you can reach other clusters with
```bash
curl http://my-service-gke_my-project_europe-west4_my-cluster.default.svc.cluster.local
```

## Generated code
A lot of the code for MC Robot is generated by the [operator-sdk](https://github.com/operator-framework/) framework.
Commands that were run:

```bash
$ brew install operator-sdk
$ export GO111MODULE=on
$ operator-sdk new mc-robot
$ cd mc-robot
$ operator-sdk add api --api-version=mc.q42.nl/v1 --kind=ServiceSync
$ operator-sdk add api --api-version=mc.q42.nl/v1 --kind=ServiceSync
$ operator-sdk generate k8s && operator-sdk generate openapi
$ operator-sdk add controller --api-version=mc.q42.nl/v1 --kind=ServiceSync
```

## ADRs
- [Initial architecture](./adr/0001-architecture.md)
